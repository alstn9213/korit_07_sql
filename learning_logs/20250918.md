# CUD
1. Database 생성
```sql
create database 데이터베이스명
create database kor_it;
```
2. 특정 데이터베이스의 사용
```sql
use 데이터베이스명
use kor_it;
```

3. 테이블 생성
```sql
create table 테이블명(
  컬럼1 속성1, 속성2, ...,
  컬림2 속성a, 속성b, ...,
);

CREATE TABLE students (
	student_id INT AUTO_INCREMENT PRIMARY KEY,
	student_name VARCHAR(100) NOT NULL,
	enrollment_date DATE NOT NULL
);

```
현재까지 수업에서 students / studen2라고 하는 두개의 테이블을 생성했다. 그런데 students에는 없고 students2에는 있는 컬럼이 있다. (email관련) 그러면 이미 생성된 테이블에 대고 컬럼을 추가해야한다.

- 컬럼추가SQL문
```sql
ALTER TABLE students
	ADD COLUMN student_email VARCHAR(100) NOT NULL;
```

- 컬럼 삭제 SQL문
```sql
alter table 테이블명 drop column 컬럼명;
alter table students2 drop column email;
```
해당 컬럼의 모든 데이터가 영구적으로 삭제된다. 되돌릴 수 없기 때문에 백업등 사전 준비가 필요하다.

-컬럼 수정 sql문
  1. CHANGE : 기존 컬럼의 컬럼명 및 자료형과 조건을 전부 새로 세팅할 때 사용.
```sql
alter table 테이블명 change column 기존컬럼명 새컬럼명 자료형, 조건
```

change를 쓸 경우 컬럼명만 바꾸더라도 자료형과 조건을 전부 다 명시해줘야한다.
```sql
alter table students2 change column email student2_email varchar(100) not null;
```

  2. RENAME : 컬럼의 이름만 변경하고 기존 자료형과 조건은 유지. DB에 따라 다르다.

```sql
alter table 테이블명 rename column 기존 컬럼명 to 새컬럼명;
alter table students2 rename column email to students2_email;
```

enrollment_date를 삭제하고, 다시 student_enrollment_date를 추가한다.
student_id / student_name / student_email / student_enrollment_date 라는 순서로 컬럼 구성

```sql
# 기존 컬럼 삭제 sql문
alter table students drop column enrollment_date;
# 새로운 컬럼 추가 sql문
ALTER TABLE students 
	ADD COLUMN student_enrollment_date VARCHAR(100) NOT null;
```
DB 생성 / DB 사용 / 테이블 생성/ 컬럼추가 / 컬럼 수정 / 컬럼 삭제와 관련된 DDL

생성한 TABLE에 DATA(row)를 추가/수정/삭제하는 DML학습
- students 테이블에 데이터 삽입 SQL문
```sql
insert into 테이블명 (컬럼명1, 컬럼명2, ..., 컬럼명N) 
  Values (데이터a1, 데이터a2, ... , 데이터an), (데이터b1, 데이터b2, ... , 데이터bn);

```
이상의 코드에서 주목해야하는 부분은 student_id 컬럼에 값을 insert하지않았다는 점이다. 이유는 table 생성시(즉, DDL을 사용했을 때), AUTO INCREMENT를 적용했기때문이다.
그리고 전체 컬럼에 차례대로 데이터를 입력한다고 가정하면 (컬럼명1, 컬럼명2, ..., 컬럼명n) 부분이 없어도 된다. 다만 실무상에서는 어느 컬럼에 어떤 데이터를 넣었는지 명확하게 하기위해 항상 명시해주는 편이다.

- 특정 데이터 수정 SQL문 
```sql
update 테이블명 
set 컬럼명 = 바꿀데이터값
where 컬럼명 = 검색가능한 데이터값


update students
set student_name = '김사백오십'
where student_id = 1;
```

- 특정 데이터 삭제 sql문
```sql
delete from 테이블명
where 조건;
```

지시 사항

1. 김삼 / kim3@test.com / 2025-02-01 데이터 추가
2. 김사 / kim4@test.com / 2025-03-01 데이터 추가
3. 김삼 데이터 삭제.
4. 김사 이름을 지니고 있는 데이터의 student_enrollment_date를 2024-04-04로 수정
5. select 문을 통해 김사 데이터만 출력

```sql
INSERT INTO students 
VALUES (0, '김삼', 'kim3@test.com', '2025-02-01'), 
(0, '김사', 'kim4@test.com', '2025-03-01');

DELETE FROM students
WHERE student_id = 3;

UPDATE students
SET student_enrollment_date = '2024-04-04' 
WHERE student_name = '김사';

SELECT *
FROM students
WHERE student_name =  '김사';
```

지시사항 - 다음을 만족하는 테이블을 생성(sql/gui 둘 다)
테이블 명: instructor
컬럼명:
  1. instructor_id /INT/PK/auto increment 적용
  2. name / varchar(100) / not null
  3. email / varchar(100) / not null
  4. hire_date / DATE / not null

2. 정보 추가
'이일', '21@test.com', '2025-09-18'
'이이', '22@test.com', '2022-09-18'
'이삼', '23@test.com', '2023-09-18'

```sql
CREATE TABLE instructor (
	instructor_id INT PRIMARY KEY AUTO_INCREMENT,
	NAME VARCHAR(100) NOT NULL,
	email VARCHAR(100) NOT NULL,
	hire_date DATE NOT null
	); 

INSERT INTO instructor
	VALUES 
	(0, '이일', '21@test.com', '2025-09-18'),
	(0, '이이', '22@test.com', '2022-09-18'),
	(0, '이삼', '23@test.com', '2023-09-18');
```
테이블 명 바꾸는 sql문
```sql
alter table instructor to instructor2;
```
과목 테이블 courses를 생성
course_id int primary key
course_name varchar(100)
instructor_id int Foreign key
start date DATE
end_date DATE

```sql
CREATE TABLE courses (
  course_id int AUTO_INCREMENT PRIMARY key,
  course_name varchar(100) not null,
  instructor_id int not null,
  start_date DATE not null,
  end_date DATE not null,
  foreign key(instructor_id) references instructor(instructor_id)
  );

```

students / courses 간의 관계 테이블을 하나 만든다.
테이블명: student_courses

student_id / int / pk, fk
course_id / int / pk, fk

- student_id 와 course_id의 값을 조합하여 _복합 기본키(composite primary key)_ 로 설정한다.
- 일반 pk처럼 테이블의 각 행이 고유하도록 보장하며, 같은 수강생이 동일한 과목이 중복해서 등록할 수 없다.
예를 들어 student_id가 1인 학생이 course_id = 2에 해당하는 python 과목을 수강한다고 가정했을 때의 student_courses테이블의 pk는 12가 된다.
추후 1 학생이 다시 2를 들으려고 하면 pk가 12로 중복될 것이기 때문에 고유값을 침해하여 수강불가가 뜬다.

출석현황 테이블 생성(attendence)
테이블명 : attendence
atendence_id / int / pk
student_id / int / fk
course_id / int /fk
date / DATE
status / varchar(10) / 예시 출석, 결석 etc

```sql
create table attendence(
  attendence_id int auto_increment primary key,
  student_id int not null,
  course_id int not null,
  date date not null,
  status varchar(10) not null,
  foreign key(student_id) references students(student_id),
  foreign key(course_id) references courses(course_id)
)
```

예제 데이터 삽입
```sql
-- attendence
insert into attendence(student_id, course_id, date, status) values 
(1, 1, '2025-09-18', '출'), 
(2, 1, '2025-09-18', '결'), 
(4, 1, '2025-09-18', '출'), 
(1, 2, '2025-09-19', '출'), 
(2, 2, '2025-09-19', '출'), 
(4, 2, '2025-09-19', '결');

-- courses
insert into courses(course_name, instructor_id, start_date, end_date) values
('java', 1, '2025-09-01', '2025-09-30'),
('python', 2, '2025-09-02', '2025-09-29');

-- instructor
insert into instructor(instructor_name, email, hire_date) values
('김선생', 'kimt@test.com', '2025-07-02'),
('이선생', 'leet@test.com', '2024-01-01');

-- student_courses
insert into student_courses (student_id, course_id) values
(1, 1),
(2, 1),
(4, 1),
(1, 2),
(4, 2);

```
이전 수행에서 students에서 student_id=3을 삭제헀기 때문에 오류가 발생했다. 그래서 전체적으로 3으로 적힌 부분을 4로 수정하여 처리했다.

지시사항: 1
수강생 목록 및 과목 조회
students / students_courses / courses 테이블을 결합하여, 각 학생의 이름과 그 학생이 수강하는 모든 과목명을 조회한다. 결과는 이름 순서로.

```sql

SELECT s.student_name, c.course_name
FROM students s 
INNER JOIN student_courses sc ON s.student_id = sc.student_id
INNER JOIN courses c ON sc.course_id = c.course_id
ORDER BY s.student_name;
```
김사백오십 학생의 이름과 이메일 그리고 수강 과목을 출력

이일 강사의 교수 과목과 수강생 수