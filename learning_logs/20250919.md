1- 4
2- 2
3- 4
4- 1
5- 2
6- 3
7- 2
8- 2
9- 2
10- 1
11- 4
12- 4
13- 1
14- 2
15- 2
16- 1
17- 2
18- 2
19- 3
20- 4
21- 3
22- 1
23- 2
24- 3
25- 3
26- 4
27- 4
28- 3
29- 3
30- 4

part 1
1. CREATE DATABASE sql_finals;
2. USE sql_finals;
3. CREATE table users (
id INT PRIMARY KEY AUTO_INCREMENT,
created_at varchar(100),
username VARCHAR(100) NOT NULL,
phone VARCHAR(100),
country VARCHAR(50));
4. ALTER TABLE users
ADD COLUMN is_marketing_agree INT;
5. ALTER TABLE users
RENAME COLUMN phone TO user_phone;
6. ALTER TABLE users
DROP created_at;
7. CREATE TABLE products (
id INT PRIMARY KEY AUTO_INCREMENT,
NAME VARCHAR(255) NOT NULL,
price DECIMAL(10,2) NOT NULL,
discount_price DECIMAL(10,2) NOT NULL);
8. ALTER TABLE products
MODIFY NAME VARCHAR(500);
9. CREATE TABLE staff (
id INT PRIMARY KEY AUTO_INCREMENT,
user_id INT NOT NULL,
last_name VARCHAR(50) NOT NULL,
FIRST_name VARCHAR(50) NOT NULL,
birth_date DATE);
10. CREATE TABLE orders (
id INT PRIMARY KEY AUTO_INCREMENT,
user_id INT,
staff_id INT,
order_date DATE);
11. CREATE TABLE orderdetails (
id INT PRIMARY KEY AUTO_INCREMENT,
order_id INT,
product_id INT,
quantity INT NOT NULL,
FOREIGN KEY (order_id) REFERENCES orders(id),
FOREIGN KEY (product_id) REFERENCES products(id)
);
12. ALTER TABLE users
DROP is_marketing_agree;
13. ALTER TABLE orderdetails
rename column quantity to amount;
14. DROP table orderdetails;
15. DROP database sql_finals;

part2
1. INSERT INTO users(username, user_phone, city, country)
VALUES ('joejoe@joecompany.com', '010-1234-5678', 'Seoul','Korea'),
('phk4938@never.com', '010-9876-5432', 'Buenos Aires', 'Argentina');
2. INSERT INTO users(username, user_phone, city, country)
VALUES ('inr01@never.com', '010-1111-2222', 'New York', 'USA'),
('fuxp76@never.com', '010-3333-4444', 'Seoul', 'Korea');
3. INSERT INTO products
VALUES (0,'Terrarossa Coffee Back', 18.00, 15.00);
4. INSERT INTO products
VALUES (0, 'Mini Cheese Ball', 19.00, 19.00),
(0, 'Stabucks Drip Coffee', 22.00, 22.00);
5. INSERT INTO staff
VALUES (0, 2, 'Carter', 'Joe', '1990-10-20'),
(0, 10, 'Jang', 'Ken', '1991-02-19');
6. INSERT INTO orders(user_id, staff_id, order_date)
VALUES (2, 1, '2025-09-18'); 
7. INSERT INTO orderdetails(order_id, product_id, amount)
VALUES 
	(1, 1, 2), 
	(1, 2, 3); 
8. UPDATE users
SET user_phone = '010-5555-6666'
WHERE username = 'inr01@never.com';
9. UPDATE products
SET price = 20.00
WHERE NAME = 'Mini Cheese Ball';
10. UPDATE staff
SET first_name = 'MinJun'
WHERE user_id = 10;
11. DELETE from users
WHERE username = 'phk4938@never.com';
12. DELETE FROM products
WHERE id = 3;
13. DELETE FROM orderdetails
WHERE order_id = 1;
14. DELETE FROM users;
15. DELETE FROM orders
WHERE order_date = '2025-09-18';

part3 
1. SELECT id, username, phone 
FROM users;
2. SELECT COUNT(id)
FROM orders
WHERE order_date LIKE '2015%';
3. SELECT name
FROM products
WHERE price = (SELECT MAX(price) FROM products);
4. SELECT id, username
FROM users
WHERE country = 'Korea';
5. SELECT last_name, first_name
FROM staff 
where birth_date <= '1960-01-01';
6. SELECT o.id, o.order_date
FROM orders o inner JOIN users u
ON o.user_id = u.id
WHERE o.user_id = 20;
7. SELECT sum(quantity)
FROM orderdetails
WHERE product_id = 17
8. SELECT ROUND(AVG(price), 2) 
FROM products
9. SELECT country, COUNT(id) AS userCnt
FROM users
GROUP BY country
HAVING userCnt > 4;
10. SELECT staff_id, COUNT(id) AS orderCnt
FROM orders
GROUP BY staff_id
ORDER BY orderCnt DESC;
11. SELECT u.username, COUNT(o.id) AS orderCnt
FROM users u INNER JOIN orders o
ON u.id = o.user_id
GROUP BY u.id
HAVING orderCnt > 1;
12. SELECT u.id, u.username, s.last_name, s.first_name
FROM users u INNER JOIN staff s 
ON u.id = s.user_id
13. SELECT o.id, SUM(quantity) as orderQuantity
FROM orders o INNER JOIN orderdetails od
ON o.id = od.order_id
GROUP BY o.id
HAVING orderQuantity > 100
14. SELECT u.id, COUNT(u.id)
FROM orders o INNER JOIN users u
ON o.user_id = u.id
WHERE country = 'USA';
15. SELECT staff_id, COUNT(id)
FROM orders
WHERE 
	order_date LIKE '2015-12%'
	and
	staff_id = 3
16. SELECT NAME, price
FROM products
WHERE price > (SELECT AVG(price) FROM products); 
17. SELECT city, COUNT(id)
FROM users 
GROUP BY city
HAVING city = 'Seoul';
18. SELECT o.id, SUM(p.price * od.quantity) AS totalPrice
FROM orders o INNER JOIN orderdetails od
ON o.id = od.order_id
INNER JOIN products p
ON od.product_id = p.id
GROUP BY o.id
HAVING totalPrice > 1999;
19. SELECT NAME, price
FROM products
WHERE NAME LIKE '%Coffee%';
20. (SELECT last_name, first_name
FROM staff
WHERE birth_date < '1960-01-01')
UNION
(SELECT last_name, first_name
FROM staff
WHERE birth_date >= '1990-01-01');